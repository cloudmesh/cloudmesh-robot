

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ESP8266 &mdash; cm robot 1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="cm robot 1.0 documentation" href="index.html"/>
        <link rel="next" title="GUI" href="gui.html"/>
        <link rel="prev" title="Hardware for IoT Projects" href="hardware.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> cm robot
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="preface.html">Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="preface.html#contributors">Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#contact">Contact</a></li>
<li class="toctree-l2"><a class="reference internal" href="preface.html#conventions">Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="security.html#windows-and-sliding-doors">Windows and sliding doors</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#tornado">Tornado</a><ul>
<li class="toctree-l3"><a class="reference internal" href="security.html#things-you-should-do">Things you should do</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#things-you-should-not-do">Things you should NOT do</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="security.html#fire">Fire</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#drills">Drills</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html#workspace-security">Workspace Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="security.html#workplace-organization">Workplace Organization</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#scissors-knifes-and-other-sharp-tools">Scissors, Knifes and other Sharp tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#soldering">Soldering</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#knowledge-of-electricity">Knowledge of Electricity</a></li>
<li class="toctree-l3"><a class="reference internal" href="security.html#robot-car-security">Robot Car Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="security.html#robot-floor">Robot Floor</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#robot-table-frames">Robot Table Frames</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#robot-tripods">Robot Tripods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="security.html#drone-security">Drone Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="security.html#drone-tripods">Drone Tripods</a></li>
<li class="toctree-l4"><a class="reference internal" href="security.html#drone-nets">Drone Nets</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="security.html#recreational-recess-activities">Recreational Recess Activities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="linux.html">Linux</a><ul>
<li class="toctree-l2"><a class="reference internal" href="linux.html#file-commands">File commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux.html#search-commands">Search commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux.html#help">Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux.html#keyboard-shortcuts">Keyboard Shortcuts</a></li>
<li class="toctree-l2"><a class="reference internal" href="linux.html#assignments">Assignments</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="setup.html#linux">Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#installation-of-tools">Installation of tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="setup.html#osx">OSX</a><ul>
<li class="toctree-l3"><a class="reference internal" href="setup.html#id1">OSX</a><ul>
<li class="toctree-l4"><a class="reference internal" href="setup.html#xcode">XCode</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup.html#homebrew">Homebrew</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup.html#install-pyenv">Install pyenv</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup.html#install-aquamacs">Install Aquamacs</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup.html#install-python-3-6-1">Install python 3.6.1</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="tools.html#markdown">Markdown</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#aquamacs">Aquamacs</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#bash">Bash</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#arduino">Arduino</a></li>
<li class="toctree-l2"><a class="reference internal" href="tools.html#osx-terminal">OSX Terminal</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="hardware.html">Hardware for IoT Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="hardware.html#raspberry-pi-3">Raspberry Pi 3</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware.html#esp8266-robot-car-kit">ESP8266 Robot Car Kit</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware.html#sensor-kit">Sensor Kit</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware.html#fish-kit">Fish Kit</a></li>
<li class="toctree-l2"><a class="reference internal" href="hardware.html#alternative-components">Alternative components</a><ul>
<li class="toctree-l3"><a class="reference internal" href="hardware.html#esp8266-alternatives">Esp8266 Alternatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="hardware.html#car-parts-alternatives">Car Parts Alternatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="hardware.html#simple-sensors">Simple sensors</a></li>
<li class="toctree-l3"><a class="reference internal" href="hardware.html#grove-sensors">Grove Sensors</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">ESP8266</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation-of-the-robot-interface">Installation of the robot Interface</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install-cloudmesh-robot">Install Cloudmesh Robot</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-the-board">Testing the board</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#flashing-the-image-onto-the-robot-board">Flashing the image onto the robot board</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#erase-the-chip">Erase the chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#putting-python-on-the-chip">Putting Python on the chip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-if-it-works">Testing if it works</a></li>
<li class="toctree-l3"><a class="reference internal" href="#execute-an-arbitrary-program">Execute an arbitrary program</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interactive-python-shell-on-the-board">Interactive Python shell on the board</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cleaning-and-reinstalling-a-development-version">Cleaning and reinstalling a development version</a></li>
<li class="toctree-l3"><a class="reference internal" href="#nodemcu-esp12-dev-kit-pin-definition">NodeMCU ESP12 Dev Kit Pin Definition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#led">LED</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#program">Program</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#alternative-boords">Alternative boords</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#huzzah-feather-esp8266">HUZZAH Feather esp8266</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gui.html">GUI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="gui.html#guizero">GUIZero</a></li>
<li class="toctree-l2"><a class="reference internal" href="gui.html#kivy">Kivy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="gui.html#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui.html#hello-world">Hello World</a></li>
<li class="toctree-l3"><a class="reference internal" href="gui.html#packaging">packaging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="turtle.html">Turtle Graphics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="turtle.html#demo">Demo</a></li>
<li class="toctree-l2"><a class="reference internal" href="turtle.html#program-example">Program example</a></li>
<li class="toctree-l2"><a class="reference internal" href="turtle.html#shape">Shape</a></li>
<li class="toctree-l2"><a class="reference internal" href="turtle.html#links">Links</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="turtle.html#robot-dance-simulator">Robot Dance Simulator</a></li>
<li class="toctree-l1"><a class="reference internal" href="turtle.html#scratch">Scratch</a></li>
<li class="toctree-l1"><a class="reference internal" href="turtle.html#mblock">MBlock</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rasp.html">Raspberry PI 3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#sd-card">SD CARD</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#connecting">Connecting</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#update">Update</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#vlc-on-osx">VLC on OSX</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#streaming-video">STreaming video</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rasp.html#linux-commandline">Linux commandline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#enable-spi">Enable SPI</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#rtimulib2">RTIMUlib2</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#compile-rtimulib-apps">compile RTIMULib Apps</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasp.html#camera">Camera</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="rasp.html#lessons-and-projects">Lessons and projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="mblock.html">mblock</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Robot Camp</a><ul>
<li class="toctree-l2"><a class="reference internal" href="overview.html#table-of-content">Table of Content</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webrepl.html">Webrepl</a><ul>
<li class="toctree-l2"><a class="reference internal" href="webrepl.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="marvelmind.html">Marvelmind</a><ul>
<li class="toctree-l2"><a class="reference internal" href="marvelmind.html#introduction-to-the-marvelmind-positioning-system">Introduction to the Marvelmind Positioning System</a></li>
<li class="toctree-l2"><a class="reference internal" href="marvelmind.html#marvelmind-environment-setup">Marvelmind Environment Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="marvelmind.html#marvelmind-stationary-beacon-setup">Marvelmind Stationary Beacon Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="marvelmind.html#marvelmind-mobile-beacon-setup">Marvelmind Mobile Beacon Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="marvelmind.html#programming-in-python">Programming in Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="marvelmind.html#marvelmind-updates">Marvelmind Updates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="marvelmind.html#updating-marvelmind-modem">Updating Marvelmind modem.</a></li>
<li class="toctree-l3"><a class="reference internal" href="marvelmind.html#updating-marvelmind-beacons">Updating Marvelmind beacons</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">cm robot</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>ESP8266</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/esp8266.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="esp8266">
<h1>ESP8266<a class="headerlink" href="#esp8266" title="Permalink to this headline">¶</a></h1>
<p>When working with a external hardware such as the NodeMCU you will find
a lot of information on the internet about it. It is a bit difficult at
times to assess what you need to program it. You are exposed to many
choices. A NodeMCU typically comes with Lua. However you have many other
choices. Such choices include multiple programming languages such as
Lua, MicroPython, Arduino/C, Go and others.</p>
<p>As all of them are slightly different you need to identify which works
best for you. In addition you need to install images, programs and
libraries that support your specific language choice.</p>
<p>For our first experiments we will be using MicroPython. This choice is
motivated by the fact that Python is a well established and easy to
learn programming language. Recently many educational institutions are
offering Python as an introductory programming language making this
choice even more compelling.</p>
<p>To simplify the setup and use of the esp8266 for MicroPython we
developed an easy to use commandline tool that allows users to set up
their computer to interact more easily with the board. We believe that
the interface is so simple that it can also be used in STEM activities
and not just in the university or by advanced hobbyists.</p>
<div class="section" id="installation-of-the-robot-interface">
<h2>Installation of the robot Interface<a class="headerlink" href="#installation-of-the-robot-interface" title="Permalink to this headline">¶</a></h2>
<p>To more easily interface with the robot we have developed a convenient
program that is installed as part of a command tool called cloudmesh.</p>
<div class="section" id="install-cloudmesh-robot">
<h3>Install Cloudmesh Robot<a class="headerlink" href="#install-cloudmesh-robot" title="Permalink to this headline">¶</a></h3>
<p><strong>The install from pip is not yet working</strong></p>
<blockquote>
<div><p>To install the robot command you simply type</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install cloudmesh.robot
</pre></div>
</div>
<p>This will install a program <code class="docutils literal"><span class="pre">cms</span></code> on your computer that allows you
to easily communicate with the robot.</p>
</div></blockquote>
<p>Developers are however encouraged to work with the source code. Thus you
will need to first obtain it with the following commands:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ mkdir github
$ cd github
$ git clone https://github.com/cloudmesh/cloudmesh.common.git
$ git clone https://github.com/cloudmesh/cloudmesh.cmd5.git
$ git clone https://github.com/cloudmesh/cloudmesh.robot.git
$ cd cloudmesh.robot
$ make source
</pre></div>
</div>
<p>To test out if the command has been installed, type</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot welcome
</pre></div>
</div>
<p>If everything works you should see an ASCII image of R2D2 and C3PO.
Next, we still have to install some additional programs before you can
use other commands.</p>
<p>The installation of these commands requires administrator access. In
case you are not an administrator you can temporarily change yourself as
an administrator in the OSX configuration windows. Than you can execute
the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot osx install
</pre></div>
</div>
<p>In addition you will need to install the OSX driver for the USB
interface to the esp8266. This is achieved with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot osx driver
</pre></div>
</div>
<p>Now please change your account to be again a standard account.</p>
<p>Now you <strong>MUST REBOOT</strong> the machine. Without rebooting you will not be
able to use the USB drivers.</p>
<p>Once you have successfully installed the drivers and the commands you
can look at the manual page of the robot command with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot help
</pre></div>
</div>
<p>You will see a manual page like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span> <span class="n">Usage</span><span class="p">:</span>
    <span class="n">robot</span> <span class="n">welcome</span>
    <span class="n">robot</span> <span class="n">osx</span> <span class="n">install</span>
    <span class="n">robot</span> <span class="n">osx</span> <span class="n">driver</span>
    <span class="n">robot</span> <span class="n">image</span> <span class="n">fetch</span>
    <span class="n">robot</span> <span class="n">probe</span> <span class="p">[</span><span class="o">--</span><span class="nb">format</span><span class="o">=</span><span class="n">FORMAT</span><span class="p">]</span>
    <span class="n">robot</span> <span class="n">flash</span> <span class="n">erase</span> <span class="p">[</span><span class="o">--</span><span class="n">dryrun</span><span class="p">]</span>
    <span class="n">robot</span> <span class="n">flash</span> <span class="n">python</span> <span class="p">[</span><span class="o">--</span><span class="n">dryrun</span><span class="p">]</span>
    <span class="n">robot</span> <span class="n">test</span>
    <span class="n">robot</span> <span class="n">run</span> <span class="n">PROGRAM</span>
    <span class="n">robot</span> <span class="n">credentials</span> <span class="nb">set</span> <span class="n">SSID</span> <span class="n">USERNAME</span> <span class="n">PASSWORD</span>
    <span class="n">robot</span> <span class="n">credentials</span> <span class="n">put</span>
    <span class="n">robot</span> <span class="n">credentials</span> <span class="nb">list</span>
    <span class="n">robot</span> <span class="n">login</span>
    <span class="n">robot</span> <span class="nb">set</span> <span class="n">PORT</span> <span class="n">NOT</span> <span class="n">IMPLEMENTED</span>
    <span class="n">robot</span> <span class="n">ls</span> <span class="p">[</span><span class="n">PATH</span><span class="p">]</span>
    <span class="n">robot</span> <span class="n">put</span> <span class="p">[</span><span class="o">-</span><span class="n">o</span><span class="p">]</span> <span class="n">SOURCE</span> <span class="p">[</span><span class="n">DESTINATION</span><span class="p">]</span>
    <span class="n">robot</span> <span class="n">get</span> <span class="n">PATH</span>
    <span class="n">robot</span> <span class="n">rm</span> <span class="n">PATH</span>
    <span class="n">robot</span> <span class="n">rmdir</span> <span class="n">PATH</span>
    <span class="n">robot</span> <span class="n">dance</span> <span class="n">FILE</span> <span class="n">IPS</span>
    <span class="n">robot</span> <span class="n">inventory</span> <span class="nb">list</span> <span class="p">[</span><span class="o">--</span><span class="n">cat</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">path</span><span class="o">=</span><span class="n">PATH</span><span class="p">]</span> <span class="p">[</span><span class="n">ID</span><span class="p">]</span>

<span class="n">Arguments</span><span class="p">:</span>
    <span class="n">FILE</span>   <span class="n">a</span> <span class="n">file</span> <span class="n">name</span>

<span class="n">Options</span><span class="p">:</span>
    <span class="o">-</span><span class="n">f</span>      <span class="n">specify</span> <span class="n">the</span> <span class="n">file</span>
</pre></div>
</div>
</div>
<div class="section" id="testing-the-board">
<h3>Testing the board<a class="headerlink" href="#testing-the-board" title="Permalink to this headline">¶</a></h3>
<p>Before you can use your esp8266, you must have the appropriate drivers
installed on your computer. Click on <a class="reference external" href="https://github.com/cloudmesh/cloudmesh.robot/blob/7859b395fd15e4d6ced679b05893c9a91957c956/documentation/source/espdrivers.md">this
link</a>
and follow the instructions on how to install the drivers. After
installation, <strong>you must open a new terminal</strong>.</p>
<p>Next, connect the esp8266 with a USB cable to the computer. The esp8266
should look similar to this.</p>
<center></center><p>After you connected it, press the reset button. Before doing anything on
the board, we must test it. Once you have plugged it in, execute the
following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot probe
</pre></div>
</div>
<p>This command will take about ten seconds to execute. The esp8266’s led
should flash irregularly as it is probed. When the probe is finished, an
image similar to the following should appear in your terminal:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">+-----------+---------------------------+</span>
<span class="o">|</span> <span class="n">Attribute</span> <span class="o">|</span> <span class="n">Value</span>                     <span class="o">|</span>
<span class="o">+-----------+---------------------------+</span>
<span class="o">|</span> <span class="n">chipid</span>    <span class="o">|</span> <span class="sa">b</span><span class="s1">&#39; 0x00d0f9ec&#39;</span>            <span class="o">|</span>
<span class="o">|</span> <span class="n">mac</span>       <span class="o">|</span> <span class="sa">b</span><span class="s1">&#39; 00:10:FA:6E:38:4A&#39;</span>     <span class="o">|</span>
<span class="o">|</span> <span class="n">tty</span>       <span class="o">|</span> <span class="o">/</span><span class="n">dev</span><span class="o">/</span><span class="n">tty</span><span class="o">.</span><span class="n">wchusbserial1410</span> <span class="o">|</span>
<span class="o">+-----------+---------------------------+</span>
</pre></div>
</div>
<p>Please note that you should only have one board attached to your
computer.</p>
</div>
</div>
<div class="section" id="flashing-the-image-onto-the-robot-board">
<h2>Flashing the image onto the robot board<a class="headerlink" href="#flashing-the-image-onto-the-robot-board" title="Permalink to this headline">¶</a></h2>
<p>Next we need to flash the image on the robot board. Naturally, we need
to fetch the image first from the internet. We do this with the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot image fetch
</pre></div>
</div>
<p>This will fetch an image that contains MicroPython into your local
directory.</p>
<p>Next we need to <em>flash</em> the image on the board.</p>
<p>Before you begin, make sure that the esp8266 is connected to your
computer. The board may come with a preinstalled image such as Lua or
some custom image from the vendor. In order to write programs in python,
we need to the chips to run micropython. To get micropython on our
esp8266’s, a number of steps are required.</p>
<div class="section" id="erase-the-chip">
<h3>Erase the chip<a class="headerlink" href="#erase-the-chip" title="Permalink to this headline">¶</a></h3>
<p>First we need to erase the chip.</p>
<p>Run the following command in your terminal terminal, and then <strong>do not
proceed.</strong></p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot flash erase
</pre></div>
</div>
<p>Your terminal should respond with the following query:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>/dev/tty.SLAB_USBtoUART
Please press the right buttons
continue? (Y/n)
</pre></div>
</div>
<p>Before taking any further steps, press both buttons on the esp8266 at
the same time. Once you have done this, type <code class="docutils literal"><span class="pre">Y</span></code> and press <code class="docutils literal"><span class="pre">enter</span></code>.
The process should take under ten seconds to complete.</p>
</div>
<div class="section" id="putting-python-on-the-chip">
<h3>Putting Python on the chip<a class="headerlink" href="#putting-python-on-the-chip" title="Permalink to this headline">¶</a></h3>
<p>Before proceeding, you must once again press both of the buttons on the
esp8266. Once this is done, you are ready to flash the chip with python
with the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot flash python
</pre></div>
</div>
</div>
<div class="section" id="testing-if-it-works">
<h3>Testing if it works<a class="headerlink" href="#testing-if-it-works" title="Permalink to this headline">¶</a></h3>
<p>To test the python installation, execute the following command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot test
</pre></div>
</div>
<p>Be careful as it overwrites the file <code class="docutils literal"><span class="pre">test.py</span></code>. If the esp8266 is set
up properly, it should return this in your terminal:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Count</span> <span class="n">to</span> <span class="mi">3</span>
<span class="mi">1</span>
<span class="mi">2</span>
<span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="section" id="execute-an-arbitrary-program">
<h3>Execute an arbitrary program<a class="headerlink" href="#execute-an-arbitrary-program" title="Permalink to this headline">¶</a></h3>
<p>Lets assume you have placed a program in the file <code class="docutils literal"><span class="pre">prg.py</span></code> with the
command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot put prg.py
</pre></div>
</div>
<p>You must reboot the esp8266 before using a new program. This can be done
manually by pressing the reset button on the chip, or in terminal with
the command</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot reset
</pre></div>
</div>
<p>Once the chip is reset, you can run <code class="docutils literal"><span class="pre">prg.py</span></code> with the following
command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot run prg.py
</pre></div>
</div>
</div>
<div class="section" id="interactive-python-shell-on-the-board">
<h3>Interactive Python shell on the board<a class="headerlink" href="#interactive-python-shell-on-the-board" title="Permalink to this headline">¶</a></h3>
<p>To get into the interactive python shell on the board you need to reset
the esp8266 and run the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cms robot login
</pre></div>
</div>
</div>
<div class="section" id="cleaning-and-reinstalling-a-development-version">
<h3>Cleaning and reinstalling a development version<a class="headerlink" href="#cleaning-and-reinstalling-a-development-version" title="Permalink to this headline">¶</a></h3>
<p>IN case you are a developer and you need to modify the source code, we
found that it is sometimes necessary to clean your development directory
and libraries. The easiest way to do this is to go to the repository
that you like to reinstall. Let us assume it is <em>cloudmesh.robot</em>. Then
the following commands will clean the repository</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ cd cloudmesh.robot
$ pip uninstall cloudmesh.robot
</pre></div>
</div>
<p>Do the pip unisntall as many times till you see an error that no more
cloudmesh.robot versions can be found. Then execute</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ make clean
</pre></div>
</div>
<p>After this you can reinstall it with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ python setup.py install; pip install -e .
</pre></div>
</div>
<p>the -e flag is optional, but allows you to change the code without the
need of recompiling. A very useful feature in python.</p>
</div>
<div class="section" id="nodemcu-esp12-dev-kit-pin-definition">
<h3>NodeMCU ESP12 Dev Kit Pin Definition<a class="headerlink" href="#nodemcu-esp12-dev-kit-pin-definition" title="Permalink to this headline">¶</a></h3>
<p>For V1.0</p>
<p><img alt="nodemcs" src="_images/nodemcu.png" /></p>
<p>The GPIO numbers of teh NodeMCU, do not correspond with the actual
numbers used in micropythons pin library. The numbers are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Pin/GPIO</th>
<th class="head">NodeMCU</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>15</td>
<td>D8</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="led">
<h3>LED<a class="headerlink" href="#led" title="Permalink to this headline">¶</a></h3>
<div class="section" id="program">
<h4>Program<a class="headerlink" href="#program" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">machine</span>
<span class="n">led</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="n">led</span><span class="o">.</span><span class="n">high</span><span class="p">()</span>
<span class="n">led</span><span class="o">.</span><span class="n">low</span><span class="p">()</span>


<span class="kn">import</span> <span class="nn">machine</span>
<span class="n">led</span> <span class="o">=</span> <span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="n">machine</span><span class="o">.</span><span class="n">Pin</span><span class="o">.</span><span class="n">OUT</span><span class="p">)</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">led</span><span class="o">.</span><span class="n">high</span><span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">led</span><span class="o">.</span><span class="n">low</span><span class="p">()</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure" id="id1">
<img alt="breadboard" src="_images/led-esp8266_bb.png" />
<p class="caption"><span class="caption-text">breadboard</span></p>
</div>
<div class="figure" id="id2">
<img alt="schema" src="_images/led-esp8266_schem.png" />
<p class="caption"><span class="caption-text">schema</span></p>
</div>
</div>
</div>
</div>
<div class="section" id="alternative-boords">
<h2>Alternative boords<a class="headerlink" href="#alternative-boords" title="Permalink to this headline">¶</a></h2>
<div class="section" id="huzzah-feather-esp8266">
<h3>HUZZAH Feather esp8266<a class="headerlink" href="#huzzah-feather-esp8266" title="Permalink to this headline">¶</a></h3>
<p>Many different 8266 based alterantive boards exist. One of these boards
is the HUZZAH Feather. IT behaves the same as the other boards, but ay
be using differnt drivers and USB ports. The <em>cms robot</em> command line
tool is clever enough to identify automatically if it is attached and
uses the appropriate settings. More documentation about this board can
be found at</p>
<ul class="simple">
<li><a class="reference external" href="https://learn.adafruit.com/adafruit-feather-huzzah-esp8266/using-nodemcu-lua">doc</a></li>
</ul>
<p>This site has also many other examples and you can search for them with
keywords such as feather, esp8266, micropython.</p>
<p>An example on how to use the LED on the <em>feather</em> is documented at</p>
<ul class="simple">
<li><a class="reference external" href="https://learn.adafruit.com/micropython-basics-blink-a-led/blink-led">Feather HUZZAH
ESP8266</a></li>
</ul>
<p>To place micropython on the feather you can plug in the to th eusb port.
The good thing about this board is that you do not need to press any
buttons as it detects the upload nicely. If not make sure to reset it or
for flasshing press both buttons. You can do the following:</p>
<p>Probe the board with</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">robot</span> <span class="n">probe</span>
</pre></div>
</div>
<p>Erasing the feather is simple as it has a bild in mechanism to detect if
it is going to be erased. Hence no reset button needs to be pressed</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">robot</span> <span class="n">flash</span> <span class="n">erase</span>
</pre></div>
</div>
<p>Get the python image</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">robot</span> <span class="n">fetch</span> <span class="n">python</span>
</pre></div>
</div>
<p>Flashing is conducted with 460800 baud, it will take about 15 seconds.
After flashing you should try to login</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cms</span> <span class="n">robot</span> <span class="n">login</span>
</pre></div>
</div>
<p>Set the boudrate to 115200</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CTRL</span><span class="o">-</span><span class="n">A</span> <span class="n">CTRL</span><span class="o">-</span><span class="n">B</span>

<span class="o">***</span> <span class="n">baud</span><span class="p">:</span>
</pre></div>
</div>
<p>type in</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">115200</span> <span class="o">&lt;</span><span class="n">ENTER</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Make sure that echo is switched to OFF</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">CTRL</span><span class="o">-</span><span class="n">A</span> <span class="n">CTRL</span><span class="o">-</span><span class="n">C</span>
</pre></div>
</div>
<p>toogles it. Now you should see</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Try typing in</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Hello&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gui.html" class="btn btn-neutral float-right" title="GUI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="hardware.html" class="btn btn-neutral" title="Hardware for IoT Projects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Gregor von Laszewski.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>